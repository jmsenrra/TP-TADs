\documentclass[10pt, a4paper]{article}
\usepackage[paper=a4paper, left=1.5cm, right=1.5cm, bottom=1.5cm, top=3.5cm]{geometry}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}
\usepackage{indentfirst}
\usepackage{fancyhdr}
\usepackage{latexsym}
\usepackage{lastpage}
\usepackage{aed2-symb,aed2-itef,aed2-tad}
\usepackage[colorlinks=true, linkcolor=blue]{hyperref}
\usepackage{calc}

\newcommand{\f}[1]{\text{#1}}
\renewcommand{\paratodo}[2]{$\forall~#2$: #1}

\sloppy

\hypersetup{%
 % Para que el PDF se abra a página completa.
 pdfstartview= {FitH \hypercalcbp{\paperheight-\topmargin-1in-\headheight}},
 pdfauthor={Grupo x},
 pdfkeywords={TAD Mapa y TAD Campus},
 pdfsubject={TP TADs}
}

\parskip=5pt % 10pt es el tamaño de fuente

% Pongo en 0 la distancia extra entre ítemes.
\let\olditemize\itemize
\def\itemize{\olditemize\itemsep=0pt}

% Acomodo fancyhdr.
\pagestyle{fancy}
\thispagestyle{fancy}
\addtolength{\headheight}{1pt}
\lhead{Algoritmos y Estructuras de Datos II}
\rhead{$2^{\mathrm{er}}$ cuatrimestre de 2015}
\cfoot{\thepage /\pageref{LastPage}}
\renewcommand{\footrulewidth}{0.4pt}

\author{Grupo x}
\date{}
\title{TAD Mapa y TAD Campus}

\begin{document}

\section{TAD \tadNombre{Mapa}}

\begin{tad}{\tadNombre{Mapa}}
\tadGeneros{map}
\tadExporta{}
\tadUsa{\tadNombre{}}

\tadIgualdadObservacional{}{}{}{}
\tadAlinearFunciones{obst\argumento = 0?}{asd123asd123asd123asd123aasdasdasdasdasasd123asd1/$n$,nat/$m$}
\tadObservadores

\tadOperacion{obstaculos}{map}{conj (posicion)}{}
\tadOperacion{ancho}{map}{nat}{}
\tadOperacion{alto}{map}{nat}{}

\tadGeneradores

\tadOperacion{nuevoMapa}{nat /al, nat /an,conj(tupla(nat, nat)/obstaculos}{map}{$ (al \geq 1) \land(an \geq 1) \land \forall :o tupla(nat,nat)) o \in obstaculos \iff  $ }
\tadOperacion{suc}{nat}{nat}{}

\tadOtrasOperaciones

\tadOperacion{\argumento $+$ \argumento}{nat,nat}{nat}{}
\tadOperacion{\argumento $-$ \argumento}{nat/n,nat/m}{nat}{$m \leq n$}
\tadOperacion{\argumento $\times$ \argumento}{nat,nat}{nat}{}
\tadOperacion{\argumento $<$ \argumento}{nat,nat}{bool}{}
\tadOperacion{\argumento $\leq$ \argumento}{nat,nat}{bool}{}
\tadOperacion{$\min$}{nat,nat}{nat}{}
\tadOperacion{$\max$}{nat,nat}{nat}{}

\tadAxiomas[\paratodo{nat}{n, m}]
\tadAlinearAxiomas{pred(suc($n$))}
\tadAxioma{$0=0?$}{true}
\tadAxioma{suc($n$)$=0?$}{false}

\tadAxioma{pred(suc($n$))}{$n$}

\tadAxioma{$n+m$}{\IF\ $m=0?$ THEN $n$ ELSE suc($n$ $+$ pred($m$)) FI}
\tadAxioma{$n-m$}{\IF\ $m=0?$ THEN $n$ ELSE pred($n$) $-$ pred($m$) FI}
\tadAxioma{$n \times m$}{\IF\ $m=0?$ THEN $0$ ELSE $n$ $\times$ pred($m$) $+$ $n$ FI}

\tadAxioma{$n < m$}{$\lnot(m=0?)$ $\yluego$ $(n=0? \oluego\ \text{pred}(n)<\text{pred}(m))$}

\tadAxioma{$n \leq m$}{$n < m \lor n = m$}

\tadAxioma{$\min(n, m)$}{\IF\ $m < n$ THEN $m$ ELSE $n$ FI}

\tadAxioma{$\max(n, m)$}{\IF\ $m < n$ THEN $n$ ELSE $m$ FI}

\end{tad}

\section{TAD \tadNombre{Campus}}

\begin{tad}{\tadNombre{Campus}}
\tadIgualdadObservacional{d}{d'}{dicc($\kappa,\sigma$)}{$(\forall c:\kappa)$(def?($c, d$) $\igobs$ def?($c, d'$) $\yluego$\\ (def?($c, d$) $\impluego$ obtener($c, d$) $\igobs$ obtener($c, d'$)))}

\tadParametrosFormales{
    \tadEncabezadoInline{géneros}{clave, significado}
}

\tadGeneros{dicc(clave, significado)}
\tadExporta{dicc(clave, significado), generadores, observadores, borrar, claves}
\tadUsa{\tadNombre{Bool, Nat, Conjunto(clave)}}

%notar la importancia de agrupar el ultimo parametro, para la coma
\tadAlinearFunciones{obtener}{clave,significado,{dicc(clave, significado)}}

\tadObservadores 
\tadOperacion{def?}{clave,{dicc(clave, significado)}}{bool}{} 
\tadOperacion{obtener}{clave/c,{dicc(clave, significado)}/d}{significado}{def?($c$, $d$)}

\tadGeneradores
\tadOperacion{vacío}{}{dicc(clave, significado)}{}
\tadOperacion{definir}{clave,significado,{dicc(clave, significado)}}{dicc(clave, significado)}{}

\tadOtrasOperaciones
\tadOperacion{borrar}{clave/c,{dicc(clave, significado)}/d}{dicc(clave, significado)}{def?($c$,$d$)}
\tadOperacion{claves}{{dicc(clave, significado)}}{conj(clave)}{}

\tadAxiomas[\paratodo{dicc(clave, significado)}{d}, \paratodo{clave}{c, k}, \paratodo{significado}{s}]
\tadAlinearAxiomas{obtener($c$, definir($k$, $s$, $d$))}

\tadAxioma{def?($c$,vacío)}{false}
\tadAxioma{def?($c$, definir($k$, $s$, $d$)}{$c = k$ $\lor$ def?($c$, $d$)}

\tadAxioma{obtener($c$, definir($k$, $s$, $d$))}{\IF $c = k$ THEN $s$ ELSE obtener($c$, $d$) FI}

\tadAxioma{borrar($c$, definir($k$, $s$, $d$))}{\IF $c = k$ THEN {\IF def?($c$,$d$) THEN borrar($c$,$d$) ELSE $d$ FI} ELSE
definir($k$, $s$, borrar($c$, $d$)) FI}

\tadAxioma{claves(vacío)}{$\emptyset$}
\tadAxioma{claves(definir($c$,$s$,$d$))}{Ag($c$, claves($d$))}

\end{tad}

\end{document}
